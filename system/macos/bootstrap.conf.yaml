- shell:
    - description: Clone zinit
      quiet: true
      command: |
        if cd ~/.local/share/zinit/zinit.git;
        then git pull;
        else git clone https://github.com/zdharma-continuum/zinit.git ~/.local/share/zinit/zinit.git; fi

# Setup tmux plugin manager
- shell:
    - description: Clone TPM
      quiet: true
      command: |
        if cd ~/.tmux/plugins/tpm;
        then git pull;
        else git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm; fi

# Change default shell to zsh
- shell:
    - description: Change default shell to zsh
      quiet: true
      command: |
        update_shell() {
          local shell_path;
          shell_path="$(command -v zsh)"

          fancy_echo "Changing your shell to zsh ..."
          if ! grep "$shell_path" /etc/shells > /dev/null 2>&1 ; then
            fancy_echo "Adding '$shell_path' to /etc/shells"
            sudo sh -c "echo $shell_path >> /etc/shells"
          fi
          sudo chsh -s "$shell_path" "$USER"
        }

        update_shell

- link:
    ~/.config/espanso:
      if: "[ `uname` = Linux ]"
      path: espanso
    ~/Library/Preferences/espanso:
      if: "[ `uname` = Darwin ]"
      path: espanso
    ~/.hammerspoon:
      if: "[ `uname` = Darwin ]"
      path: hammerspoon
    ~/.mackup.cfg:
      if: "[ `uname` = Darwin ]"
      path: mackup/mackup.cfg
    ~/.config/kitty/kitty.conf:
      if: "[ `uname` = Darwin ]"
      path: kitty/kitty.conf
    ~/.config/kitty/base16-solarized-dark-256.conf:
      if: "[ `uname` = Darwin ]"
      path: kitty/base16-solarized-dark-256.conf
    ~/.skhdrc:
      if: "[ `uname` = Darwin ]"
      path: skhd/skhdrc
    ~/.yabairc:
      if: "[ `uname` = Darwin ]"
      path: yabai/yabairc
    ~/.yabai_focus_display:
      if: "[ `uname` = Darwin ]"
      path: yabai/yabai_focus_display
